# üéì –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä—ã–±

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±—É—á–µ–Ω–∏—é –º–æ–¥–µ–ª–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–∏–¥–æ–≤ —Ä—ã–± –ö—Ä–∞—Å–Ω–æ–≥–æ –º–æ—Ä—è.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å](#–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π-–ø—Ä–æ—Ü–µ—Å—Å)
- [–†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—Ä—É—á–Ω–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±—É—á–µ–Ω–∏—è](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–æ–±—É—á–µ–Ω–∏—è)
- [–†–∞–±–æ—Ç–∞ —Å MLflow](#—Ä–∞–±–æ—Ç–∞-—Å-mlflow)

## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å

### –ü–æ–ª–Ω–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –æ–±—É—á–µ–Ω–∏–µ–º

–í—Å—è —Å–∏—Å—Ç–µ–º–∞, –≤–∫–ª—é—á–∞—è –∑–∞–≥—Ä—É–∑–∫—É DAG –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```bash
make deploy-all
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
1. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—é SSH –∫–ª—é—á–∞ –¥–ª—è DataProc
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (Terraform)
3. ‚úÖ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ Kubernetes –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
4. ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–∞
5. ‚úÖ –ó–∞–≥—Ä—É–∑–∫—É –¥–∞—Ç–∞—Å–µ—Ç–∞ –≤ S3
6. ‚úÖ –ó–∞–≥—Ä—É–∑–∫—É DAG –∏ Spark —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ S3
7. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Airflow

### –¢–æ–ª—å–∫–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Airflow

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –æ–±–Ω–æ–≤–∏—Ç—å DAG –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
make setup-airflow
```

## üõ†Ô∏è –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Airflow

–ü–æ—Å–ª–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –æ—Ç–∫—Ä–æ–π—Ç–µ Airflow UI –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
make get-airflow-url
```

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Admin ‚Üí Variables**

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

**–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ:**
- `CLOUD_ID` - ID –æ–±–ª–∞–∫–∞ Yandex Cloud
- `FOLDER_ID` - ID –ø–∞–ø–∫–∏
- `ZONE` - –∑–æ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (ru-central1-a)
- `NETWORK_ID` - ID —Å–µ—Ç–∏ VPC
- `SUBNET_ID` - ID –ø–æ–¥—Å–µ—Ç–∏
- `SECURITY_GROUP_ID` - ID –≥—Ä—É–ø–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**DataProc:**
- `DATAPROC_SERVICE_ACCOUNT_ID` - ID service account –¥–ª—è DataProc
- `DP_SA_JSON` - JSON –∫–ª—é—á service account
- `YC_SSH_PUBLIC_KEY` - –ø—É–±–ª–∏—á–Ω—ã–π SSH –∫–ª—é—á

**S3 –∏ MLflow:**
- `S3_BUCKET_NAME` - –∏–º—è S3 bucket
- `S3_ACCESS_KEY` - –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –∫ S3
- `S3_SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á S3
- `MLFLOW_TRACKING_URI` - –∞–¥—Ä–µ—Å MLflow —Å–µ—Ä–≤–µ—Ä–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—É—á–µ–Ω–∏—è:**
- `NUM_CLASSES` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Å–æ–≤ (17)
- `IMAGE_SIZE` - —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (224)
- `BATCH_SIZE` - —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (32)
- `EPOCHS` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö (20)
- `LEARNING_RATE` - —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è (0.001)

### 2. –ò–º–ø–æ—Ä—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Airflow UI
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Admin ‚Üí Variables ‚Üí Import Variables**
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª: `/tmp/airflow_variables.json`

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ DAG

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **DAGs** –∏ –Ω–∞–π–¥–∏—Ç–µ:

**`fish_classification_training`** üêü

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- ‚úÖ DAG –∑–∞–≥—Ä—É–∂–µ–Ω –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤–∏–¥–Ω—ã –≤ Graph View
- ‚úÖ –ù–µ—Ç –∫—Ä–∞—Å–Ω—ã—Ö –∏–∫–æ–Ω–æ–∫ –æ—à–∏–±–æ–∫

## üöÄ –ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è

### –ß–µ—Ä–µ–∑ Airflow UI

1. –û—Ç–∫—Ä–æ–π—Ç–µ DAG: `fish_classification_training`
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **‚ñ∂Ô∏è Trigger DAG**
3. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ Config JSON:
   ```json
   {
     "epochs": 20,
     "batch_size": 32,
     "learning_rate": 0.001
   }
   ```
4. –ù–∞–∂–º–∏—Ç–µ **Trigger**

### –ì—Ä–∞—Ñ–∏–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

DAG —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞—á:

```
create_yandex_connection
       ‚Üì
validate_environment
       ‚Üì
validate_dataset
       ‚Üì
  create_cluster
       ‚Üì
wait_cluster_ready
       ‚Üì
   train_model (DataProc)
       ‚Üì
  register_model
       ‚Üì
promote_to_production
       ‚Üì
  cleanup_cluster
       ‚Üì
 generate_report
```

#### –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á:

1. **create_yandex_connection** - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Yandex Cloud
2. **validate_environment** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. **validate_dataset** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞—Ç–∞—Å–µ—Ç–∞ –≤ S3
4. **create_cluster** - –°–æ–∑–¥–∞–Ω–∏–µ DataProc –∫–ª–∞—Å—Ç–µ—Ä–∞ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
5. **wait_cluster_ready** - –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ (120 —Å–µ–∫)
6. **train_model** - –û–±—É—á–µ–Ω–∏–µ EfficientNet-B4 –Ω–∞ Spark –∫–ª–∞—Å—Ç–µ—Ä–µ
7. **register_model** - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –≤ MLflow Model Registry
8. **promote_to_production** - –ü–µ—Ä–µ–≤–æ–¥ –º–æ–¥–µ–ª–∏ –≤ Production stage
9. **cleanup_cluster** - –£–¥–∞–ª–µ–Ω–∏–µ DataProc –∫–ª–∞—Å—Ç–µ—Ä–∞
10. **generate_report** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Ç–æ–≥–æ–≤–æ–≥–æ –æ—Ç—á—ë—Ç–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–±—É—á–µ–Ω–∏—è

### –í Airflow

1. –û—Ç–∫—Ä–æ–π—Ç–µ DAG Run
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Graph View** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∑–∞–¥–∞—á—É ‚Üí **Logs** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤

### –í MLflow

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–µ—Ç—Ä–∏–∫ –æ–±—É—á–µ–Ω–∏—è:

```bash
make get-mlflow-url
```

–í MLflow UI:
- **Experiments** - –≤—Å–µ –∑–∞–ø—É—Å–∫–∏ –æ–±—É—á–µ–Ω–∏—è
- **Models** - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
- **Metrics** - –≥—Ä–∞—Ñ–∏–∫–∏ loss –∏ accuracy
- **Artifacts** - —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

### –ú–µ—Ç—Ä–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è

–í–æ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è:

**Per-epoch –º–µ—Ç—Ä–∏–∫–∏:**
- `train_loss` - —Ñ—É–Ω–∫—Ü–∏—è –ø–æ—Ç–µ—Ä—å –Ω–∞ train
- `train_accuracy` - —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ train
- `val_loss` - —Ñ—É–Ω–∫—Ü–∏—è –ø–æ—Ç–µ—Ä—å –Ω–∞ validation
- `val_accuracy` - —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ validation
- `learning_rate` - —Ç–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è

**–ò—Ç–æ–≥–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- `best_val_loss` - –ª—É—á—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ val loss
- `best_val_accuracy` - –ª—É—á—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ validation

**–¢–µ—Å—Ç–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- `test_accuracy` - —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ —Ç–µ—Å—Ç–µ
- `test_precision` - precision
- `test_recall` - recall
- `test_f1_score` - F1 score

## üéØ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—É—á–µ–Ω–∏—è

### –ú–æ–¥–µ–ª—å

- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: EfficientNet-B4 (pretrained –Ω–∞ ImageNet)
- **Fine-tuning**: –¢–æ–ª—å–∫–æ classifier layer
- **–ö–ª–∞—Å—Å—ã**: 17 –≤–∏–¥–æ–≤ —Ä—ã–±

### –î–∞—Ç–∞—Å–µ—Ç

- **Train**: ~900 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Validation**: ~150 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Test**: ~150 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Augmentation**: 
  - Horizontal flip
  - Random rotation (¬±15¬∞)
  - Color jitter (brightness, contrast)

### –ì–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

```python
IMAGE_SIZE = 224          # –†–∞–∑–º–µ—Ä –≤—Ö–æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
BATCH_SIZE = 32           # –†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞
EPOCHS = 20               # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö
LEARNING_RATE = 0.001     # –ù–∞—á–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è
OPTIMIZER = 'Adam'        # –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä
SCHEDULER = 'ReduceLROnPlateau'  # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ LR
```

## üìà Grafana –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫:

```bash
make get-grafana-url
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã:
- **Airflow Metrics** - —Å—Ç–∞—Ç—É—Å DAG runs
- **MLflow Metrics** - –º–µ—Ç—Ä–∏–∫–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- **System Resources** - CPU, Memory, Disk

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### DAG –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ Airflow

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Airflow Scheduler
kubectl logs -n mlops-system deployment/airflow-scheduler

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ DAG
make setup-airflow
```

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ S3

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–µ S3 credentials

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Airflow UI
# –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑:
make setup-airflow
```

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MLflow

**–ü—Ä–∏—á–∏–Ω–∞:** MLflow —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å MLflow VM
cd terraform
terraform output mlflow_vm_ip

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
curl http://<MLFLOW_IP>:5000/health
```

### Out of Memory –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏

**–†–µ—à–µ–Ω–∏–µ:** –£–º–µ–Ω—å—à–∏—Ç–µ `BATCH_SIZE`:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Airflow UI ‚Üí Admin ‚Üí Variables
2. –ò–∑–º–µ–Ω–∏—Ç–µ `BATCH_SIZE` –Ω–∞ `16` –∏–ª–∏ `8`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ DAG

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –í–∏–¥—ã —Ä—ã–± –≤ –¥–∞—Ç–∞—Å–µ—Ç–µ

1. Perca Fluviatilis (–†–µ—á–Ω–æ–π –æ–∫—É–Ω—å)
2. Perccottus Glenii (–†–æ—Ç–∞–Ω)
3. Esox Lucius (–©—É–∫–∞)
4. Alburnus Alburnus (–£–∫–ª–µ–π–∫–∞)
5. Abramis Brama (–õ–µ—â)
6. Carassius Gibelio (–ö–∞—Ä–∞—Å—å —Å–µ—Ä–µ–±—Ä—è–Ω—ã–π)
7. Squalius Cephalus (–ì–æ–ª–∞–≤–ª—å)
8. Scardinius Erythrophthalmus (–ö—Ä–∞—Å–Ω–æ–ø–µ—Ä–∫–∞)
9. Rutilus Lacustris (–ü–ª–æ—Ç–≤–∞ –æ–∑–µ—Ä–Ω–∞—è)
10. Rutilus Rutilus (–ü–ª–æ—Ç–≤–∞ –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω–∞—è)
11. Blicca Bjoerkna (–ì—É—Å—Ç–µ—Ä–∞)
12. Gymnocephalus Cernua (–Å—Ä—à)
13. Leuciscus Idus (–Ø–∑—å)
14. Sander Lucioperca (–°—É–¥–∞–∫)
15. Leuciscus Baicalensis (–ï–ª–µ—Ü –±–∞–π–∫–∞–ª—å—Å–∫–∏–π)
16. Gobio Gobio (–ü–µ—Å–∫–∞—Ä—å)
17. Tinca Tinca (–õ–∏–Ω—å)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–∏

```python
EfficientNet-B4
‚îú‚îÄ‚îÄ Features (frozen)
‚îÇ   ‚îî‚îÄ‚îÄ ... (pretrained layers)
‚îî‚îÄ‚îÄ Classifier
    ‚îú‚îÄ‚îÄ Dropout(0.4)
    ‚îî‚îÄ‚îÄ Linear(in_features=1792, out_features=17)  # Trainable
```

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```
S3 Bucket:
  datasets/
    ‚îú‚îÄ‚îÄ processed_images/
    ‚îÇ   ‚îú‚îÄ‚îÄ train/
    ‚îÇ   ‚îú‚îÄ‚îÄ val/
    ‚îÇ   ‚îî‚îÄ‚îÄ test/
    ‚îú‚îÄ‚îÄ annotations/
    ‚îî‚îÄ‚îÄ metadata.json
  
  airflow-dags/
    ‚îú‚îÄ‚îÄ fish_classification_training.py
    ‚îî‚îÄ‚îÄ requirements.txt

MLflow:
  experiments/
    ‚îî‚îÄ‚îÄ fish-classification/
        ‚îî‚îÄ‚îÄ runs/
            ‚îú‚îÄ‚îÄ metrics/
            ‚îú‚îÄ‚îÄ params/
            ‚îî‚îÄ‚îÄ artifacts/
                ‚îî‚îÄ‚îÄ model/
```

## üéâ –£—Å–ø–µ—à–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è:

1. ‚úÖ –ú–æ–¥–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ MLflow Model Registry
2. ‚úÖ –ú–æ–¥–µ–ª—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –≤ Production stage
3. ‚úÖ –ú–æ–¥–µ–ª—å –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ Inference API

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ –≤ inference:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ ML Workers –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏
kubectl rollout restart deployment/ml-worker -n ml-inference

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API
make test-api
```

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [README.md](../README.md) | **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** [ARCHITECTURE.md](../ARCHITECTURE.md)
